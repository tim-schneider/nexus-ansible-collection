# defaults file for nexus3-config-as-code
nexus_protocol: http
nexus_hostname: host.docker.internal
nexus_s3_endpoint: "http://{{ nexus_hostname }}:9000"
nexus_port: 8081
nexus_admin_username: admin
nexus_admin_password: changeme
nexus_enable_pro: true

nexus_blobstores:
  - name: default
    type: File
    path: default
    softQuota:
      type: spaceRemainingQuota
      limit: 104857600
  - name: file-quota-100-remaining
    type: File
    path: default-quota-100-remaining
    softQuota:
      type: spaceRemainingQuota
      limit: 104857600
  - name: file-quota-100-used
    type: File
    path: default-quota-100-used
    softQuota:
      type: spaceUsedQuota
      limit: 104857600
  - name: file-quota-200-used
    type: File
    path: default-quota-200-used
    softQuota:
      type: spaceUsedQuota
      limit: 209715200
  - name: s3-blob-1
    type: S3
    softQuota:
      type: spaceUsedQuota
      limit: 104857600
    bucketConfiguration:
      bucket:
        region: us-east-1
        name: nexus-s3-1
        prefix: ""
        expiration: 3
      failoverBuckets: []
      activeRegion: us-east-1
      bucketSecurity:
        accessKeyId: nexus-access-key
        secretAccessKey: nexus-secret-key
      advancedBucketConnection:
        endpoint: "{{ nexus_s3_endpoint }}"
        forcePathStyle: true
  - name: s3-blob-2
    type: S3
    softQuota:
      type: spaceUsedQuota
      limit: 104857600
    bucketConfiguration:
      bucket:
        region: us-east-1
        name: nexus-s3-2
        expiration: 3
      bucketSecurity:
        accessKeyId: nexus-access-key
        secretAccessKey: nexus-secret-key
      advancedBucketConnection:
        endpoint: "{{ nexus_s3_endpoint }}"
        forcePathStyle: true
  - name: s3-blob-3
    type: S3
    softQuota:
      type: spaceUsedQuota
      limit: 104857600
    bucketConfiguration:
      bucket:
        region: us-east-1
        name: nexus-s3-3
        expiration: 3
      bucketSecurity:
        accessKeyId: nexus-access-key
        secretAccessKey: nexus-secret-key
      advancedBucketConnection:
        endpoint: "{{ nexus_s3_endpoint }}"
        forcePathStyle: true
  - name: s3-blob-4
    type: S3
    softQuota:
      type: spaceUsedQuota
      limit: 104857600
    bucketConfiguration:
      bucket:
        region: us-east-1
        name: nexus-s3-4
        expiration: 3
      bucketSecurity:
        accessKeyId: nexus-access-key
        secretAccessKey: nexus-secret-key
      advancedBucketConnection:
        endpoint: "{{ nexus_s3_endpoint }}"
        forcePathStyle: true
  - name: s3-blob-5
    type: S3
    softQuota:
      type: spaceUsedQuota
      limit: 104857600
    bucketConfiguration:
      bucket:
        region: us-east-1
        name: nexus-s3-5
        expiration: 3
      bucketSecurity:
        accessKeyId: nexus-access-key
        secretAccessKey: nexus-secret-key
      advancedBucketConnection:
        endpoint: "{{ nexus_s3_endpoint }}"
        forcePathStyle: true
  - name: s3-grp
    type: Group
    softQuota:
      type: spaceUsedQuota
      limit: 104857600
    members:
      - s3-blob-1
      - s3-blob-2
    fillPolicy: roundRobin
  - name: s3-grp-2
    type: Group
    softQuota:
      type: spaceRemainingQuota
      limit: 104857600
    members:
      - s3-blob-3
      - s3-blob-4
    fillPolicy: writeToFirst
  - name: mixed-grp-1
    type: Group
    softQuota:
      type: spaceUsedQuota
      limit: 104857600
    members:
      - s3-blob-5
      - file-quota-100-used
    fillPolicy: roundRobin
  - name: file-grp-1
    type: Group
    softQuota:
      type: spaceUsedQuota
      limit: 104857600
    members:
      - file-quota-200-used
      - file-quota-100-remaining
    fillPolicy: roundRobin

nexus_roles:
  - id: "nx-admin"
    name: "nx-admin"
    description: "Administrator Role"
    privileges:
      - "nx-all"
    roles: []
  - id: "nx-anonymous"
    name: "nx-anonymous"
    description: "Anonymous Role"
    privileges:
      - "nx-healthcheck-read"
      - "nx-search-read"
      - "nx-repository-view-*-*-read"
      - "nx-repository-view-*-*-browse"
    roles: []
  - id: "nx-developer"
    name: "nx-developer"
    description: "Developer Role"
    privileges:
      - "nx-repository-view-*-*-read"
      - "nx-repository-view-*-*-browse"
      - "nx-repository-view-*-*-edit"
      - "nx-repository-view-*-*-add"
      - "nx-repository-view-*-*-delete"
  - id: "nx-security-admin"
    name: "nx-security-admin"
    description: "Security Administrator Role"
    privileges:
      - "nx-all"
    roles:
      - "nx-admin"

nexus_anonymous_access:
  enabled: true
  userId: anonymouse
  realmName: NexusAuthorizingRealm

nexus_content_selectors:
  - name: raw-selector
    type: csel
    description: raw-selectorrr
    expression: format == "raw"
  - name: maven-org-selector
    type: csel
    description: maven-org-selectorrr
    expression: format == "maven2" and path =^ "/org"
  - name: maven-com-selector
    type: csel
    description: maven-com-selector
    expression: format == "maven2" and path =^ "/com"

nexus_user_tokens_capability:
  enabled: true
  protectContent: true
  expirationEnabled: true
  expirationDays: 180

nexus_default_user_password: changeme
nexus_users:
  - userId: anonymous
    firstName: Anonymous
    lastName: User
    emailAddress: anonymous@example.org
    source: default
    status: active
    readOnly: false
    roles:
      - nx-anonymous
    externalRoles: []
  - userId: admin
    firstName: Administrator
    lastName: User
    emailAddress: admin@example.org
    source: default
    status: active
    readOnly: false
    roles:
      - nx-admin
    externalRoles: []
  - userId: disabled-user
    firstName: Disabled
    lastName: User
    emailAddress: info@users.org
    source: default
    status: disabled
    readOnly: false
    roles:
      - nx-anonymous
    externalRoles: []
  - userId: secondary-admin
    firstName: Secondary
    lastName: AdminUser
    emailAddress: test@test.com
    source: default
    status: active
    readOnly: false
    roles:
      - nx-anonymous
      - nx-admin
    externalRoles: []
  - userId: read-only-user
    firstName: Read
    lastName: OnlyUser
    emailAddress: readonly@users.org
    source: default
    status: active
    readOnly: true
    roles:
      - nx-anonymous
    externalRoles: []

nexus_repos_cleanup_policies:
  - name: maven_cleanup
    format: maven2
    notes: "maven"
    criteriaLastBlobUpdated: 60
    criteriaLastDownloaded: 120
    criteriaAssetRegex: "your-regex*"
  - name: maven_releases_cleanup
    format: maven2
    notes: "maven RELEASES"
    criteriaLastBlobUpdated: 60
    criteriaLastDownloaded: 120
    criteriaReleaseType: RELEASES
    criteriaAssetRegex: "your-regex*"
  - name: maven_prereleases_cleanup
    format: maven2
    notes: "maven PRERELEASES"
    criteriaLastBlobUpdated: 60
    criteriaLastDownloaded: 120
    criteriaReleaseType: PRERELEASES
    criteriaAssetRegex: "your-regex*"
  - name: python_cleanup
    format: pypi
    notes: "Python pip"
    criteriaLastBlobUpdated: 60
    criteriaLastDownloaded: 120
    criteriaAssetRegex: "your-regex*"
  - name: docker_cleanup
    format: docker
    notes: "Docker"
    criteriaLastBlobUpdated: 60
    criteriaLastDownloaded: 120
    criteriaAssetRegex: "your-regex*"
  - name: raw_cleanup
    format: raw
    notes: "Raw"
    criteriaLastBlobUpdated: 60
    criteriaLastDownloaded: 120
    criteriaAssetRegex: "your-regex*"
  - name: rubygems_cleanup
    format: rubygems
    notes: "Rubygems"
    criteriaLastBlobUpdated: 60
    criteriaLastDownloaded: 120
    criteriaAssetRegex: "your-regex*"
  - name: npm_cleanup
    format: npm
    notes: ""
    criteriaAssetRegex: "your-regex*"
  - name: npm_releases_cleanup
    format: npm
    notes: "npm RELEASES"
    criteriaAssetRegex: "your-regex*"
    criteriaReleaseType: RELEASES
  - name: npm_prereleases_cleanup
    format: npm
    notes: "npm PRERELEASES"
    criteriaAssetRegex: "your-regex*"
    criteriaReleaseType: PRERELEASES
  - name: nuget_cleanup
    format: nuget
    notes: "NuGet"
    criteriaLastBlobUpdated: 60
    criteriaLastDownloaded: 120
    criteriaAssetRegex: "your-regex*"
  - name: gitlfs_cleanup
    format: gitlfs
    notes: "gitlfs"
    criteriaLastBlobUpdated: 60
    criteriaLastDownloaded: 120
  - name: yum_prerelease_cleanup
    format: yum
    notes: "yum PRERELEASES"
    criteriaLastBlobUpdated: 60
    criteriaLastDownloaded: 120
    criteriaAssetRegex: "your-regex*"
    criteriaReleaseType: PRERELEASES
  - name: yum_releases_cleanup
    format: yum
    notes: "yum RELEASES"
    criteriaLastBlobUpdated: 60
    criteriaLastDownloaded: 120
    criteriaAssetRegex: "your-regex*"
    criteriaReleaseType: PRERELEASES
  - name: yum_cleanup
    format: yum
    notes: "yum"
    criteriaLastBlobUpdated: 60
    criteriaLastDownloaded: 120
    criteriaAssetRegex: "your-regex*"
  - name: apt_cleanup
    format: apt
    notes: "apt"
    criteriaLastBlobUpdated: 60
    criteriaLastDownloaded: 120
    criteriaAssetRegex: "your-regex*"
  - name: helm_cleanup
    format: helm
    notes: "Helm"
    criteriaLastBlobUpdated: 60
    criteriaLastDownloaded: 120
    criteriaAssetRegex: "your-regex*"
  - name: r_cleanup
    format: r
    notes: "r"
    criteriaLastBlobUpdated: 60
    criteriaLastDownloaded: 120
    criteriaAssetRegex: "your-regex*"
  - name: conda_cleanup
    format: conda
    notes: "conda"
    criteriaLastBlobUpdated: 60
    criteriaLastDownloaded: 120
    criteriaAssetRegex: "your-regex*"
  - name: go_cleanup
    format: go
    notes: "go"
    criteriaLastBlobUpdated: 60
    criteriaLastDownloaded: 120
    criteriaAssetRegex: "your-regex*"
  - name: cocoapods_cleanup
    format: cocoapods
    notes: "cocoapods"
    criteriaLastBlobUpdated: 60
    criteriaLastDownloaded: 120
    criteriaAssetRegex: "your-regex*"
  - name: conan_cleanup
    format: conan
    notes: "conan"
    criteriaLastBlobUpdated: 60
    criteriaLastDownloaded: 120
    criteriaAssetRegex: "your-regex*"
  - name: p2_cleanup
    format: p2
    notes: "p2-notes"
    criteriaLastBlobUpdated: 60
    criteriaLastDownloaded: 120
    criteriaAssetRegex: "your-regex*"

nexus_repos_raw_hosted:
  - name: raw-hosted-1
    online: true
    storage:
      blobStoreName: default
      strictContentTypeValidation: true
    cleanup:
      policyNames: []
  - name: raw-hosted-2
    online: true
    storage:
      blobStoreName: default
      strictContentTypeValidation: false
    cleanup:
      policyNames: []
  - name: raw-hosted-offline
    online: false
    storage:
      blobStoreName: default
      strictContentTypeValidation: false
    cleanup:
      policyNames:
        - raw_cleanup
    raw:
      contentDisposition: INLINE

nexus_repos_raw_proxy:
  - name: raw-proxy-1
    proxy:
      remoteUrl: http://example.com
      contentMaxAge: 1440
      metadataMaxAge: 1440
    negativeCache:
      enabled: true
      timeToLive: 1440
    httpClient:
      blocked: false
      autoBlock: true
      connection:
        useTrustStore: false
  - name: raw-proxy-2
    proxy:
      remoteUrl: http://example.com
      contentMaxAge: 1440
      metadataMaxAge: 1440
    routingRule: routing-rule-allow-all
  - name: raw-proxy-3
    proxy:
      remoteUrl: http://example.com
      contentMaxAge: 1440
      metadataMaxAge: 1440
    negativeCache:
      enabled: true
      timeToLive: 1440
    raw:
      contentDisposition: INLINE

nexus_repos_raw_group:
  - name: raw-group
    online: true
    storage:
      blobStoreName: default
      strictContentTypeValidation: true
    group:
      memberNames:
        - raw-proxy-1
        - raw-proxy-2
        - raw-proxy-3
        - raw-hosted-1
  - name: raw-group-reverse-group-order
    online: false
    storage:
      blobStoreName: default
      strictContentTypeValidation: false
    group:
      memberNames:
        - raw-proxy-3
        - raw-proxy-2
        - raw-proxy-1
        - raw-hosted-1
    raw:
      contentDisposition: INLINE

nexus_repos_yum_hosted:
  - name: yum-hosted-1
    online: true
    storage:
      blobStoreName: default
      strictContentTypeValidation: true
    cleanup:
      policyNames: []
    yum:
      repoDataDepth: 1
  - name: yum-hosted-2
    online: true
    storage:
      blobStoreName: default
      strictContentTypeValidation: false
    cleanup:
      policyNames: []
    yum:
      repoDataDepth: 1
  - name: yum-hosted-offline
    online: false
    storage:
      blobStoreName: default
      strictContentTypeValidation: false
    cleanup:
      policyNames:
        - yum_cleanup
    yum:
      repoDataDepth: 1

nexus_repos_yum_proxy:
  - name: yum-proxy-1
    proxy:
      remoteUrl: http://mirror.centos.org/centos/
      contentMaxAge: 1440
      metadataMaxAge: 1440
    negativeCache:
      enabled: true
      timeToLive: 1440
    httpClient:
      blocked: false
      autoBlock: true
      connection:
        useTrustStore: false
  - name: yum-proxy-2
    proxy:
      remoteUrl: http://mirror.centos.org/centos/
      contentMaxAge: 1440
      metadataMaxAge: 1440
    routingRule: routing-rule-allow-all
  - name: yum-proxy-3
    proxy:
      remoteUrl: http://mirror.centos.org/centos/
      contentMaxAge: 1440
      metadataMaxAge: 1440
    negativeCache:
      enabled: true
      timeToLive: 1440

nexus_repos_yum_group:
  - name: yum-group
    online: true
    storage:
      blobStoreName: default
      strictContentTypeValidation: true
    group:
      memberNames:
        - yum-proxy-1
        - yum-proxy-2
        - yum-proxy-3
        - yum-hosted-1
  - name: yum-group-reverse-group-order
    online: false
    storage:
      blobStoreName: default
      strictContentTypeValidation: false
    group:
      memberNames:
        - yum-proxy-3
        - yum-proxy-2
        - yum-proxy-1
        - yum-hosted-1

nexus_repos_apt_hosted:
  - name: apt-hosted-1
    online: true
    storage:
      blobStoreName: default
      strictContentTypeValidation: true
    cleanup:
      policyNames: []
    component:
      proprietaryComponents: true
  - name: apt-hosted-2
    online: true
    storage:
      blobStoreName: default
      strictContentTypeValidation: false
    cleanup:
      policyNames: []
    component:
      proprietaryComponents: false
  - name: apt-hosted-offline
    online: false
    storage:
      blobStoreName: default
      strictContentTypeValidation: false
    cleanup:
      policyNames:
        - apt_cleanup
    component:
      proprietaryComponents: false

nexus_repos_apt_proxy:
  - name: apt-proxy-1
    proxy:
      remoteUrl: http://archive.ubuntu.com/ubuntu/
      contentMaxAge: 1440
      metadataMaxAge: 1440
    negativeCache:
      enabled: true
      timeToLive: 1440
    httpClient:
      blocked: false
      autoBlock: true
      connection:
        useTrustStore: false
  - name: apt-proxy-2
    proxy:
      remoteUrl: http://archive.ubuntu.com/ubuntu/
      contentMaxAge: 1440
      metadataMaxAge: 1440
    routingRule: routing-rule-allow-all
  - name: apt-proxy-flat-bionic
    proxy:
      remoteUrl: http://archive.ubuntu.com/ubuntu/
      contentMaxAge: 1440
      metadataMaxAge: 1440
    negativeCache:
      enabled: true
      timeToLive: 1440
    apt:
      distribution: bionic
      flat: true

nexus_repos_nuget_hosted:
  - name: nuget-hosted-1
    online: true
    storage:
      blobStoreName: default
      strictContentTypeValidation: true
    cleanup:
      policyNames: []
    component:
      proprietaryComponents: true
  - name: nuget-hosted-2
    online: true
    storage:
      blobStoreName: default
      strictContentTypeValidation: false
    cleanup:
      policyNames: []
    component:
      proprietaryComponents: false
  - name: nuget-hosted-offline
    online: false
    storage:
      blobStoreName: default
      strictContentTypeValidation: false
    cleanup:
      policyNames:
        - nuget_cleanup
    component:
      proprietaryComponents: false

nexus_repos_nuget_proxy:
  - name: nuget-proxy-1
    proxy:
      remoteUrl: https://api.nuget.org/v3/index.json
      contentMaxAge: 1440
      metadataMaxAge: 1440
    negativeCache:
      enabled: true
      timeToLive: 1440
    httpClient:
      blocked: false
      autoBlock: true
      connection:
        useTrustStore: true
  - name: nuget-proxy-2
    proxy:
      remoteUrl: https://api.nuget.org/v3/index.json
      contentMaxAge: 1440
      metadataMaxAge: 1440
    routingRule: routing-rule-allow-all
  - name: nuget-proxy-v2
    proxy:
      remoteUrl: https://api.nuget.org/v3/index.json
      contentMaxAge: 1440
      metadataMaxAge: 1440
    negativeCache:
      enabled: true
      timeToLive: 1440
    nugetProxy:
      nugetVersion: V2

nexus_repos_nuget_group:
  - name: nuget-group
    online: true
    storage:
      blobStoreName: default
      strictContentTypeValidation: true
    group:
      memberNames:
        - nuget-proxy-1
        - nuget-proxy-2
        - nuget-proxy-v2
        - nuget-hosted-1
  - name: nuget-group-reverse-group-order
    online: false
    storage:
      blobStoreName: default
      strictContentTypeValidation: false
    group:
      memberNames:
        - nuget-proxy-v2
        - nuget-proxy-2
        - nuget-proxy-1
        - nuget-hosted-1

nexus_repos_r_hosted:
  - name: r-hosted-1
    online: true
    storage:
      blobStoreName: default
      strictContentTypeValidation: true
    cleanup:
      policyNames: []
    component:
      proprietaryComponents: true
  - name: r-hosted-2
    online: true
    storage:
      blobStoreName: default
      strictContentTypeValidation: false
    cleanup:
      policyNames: []
    component:
      proprietaryComponents: false
  - name: r-hosted-offline
    online: false
    storage:
      blobStoreName: default
      strictContentTypeValidation: false
    cleanup:
      policyNames:
        - r_cleanup
    component:
      proprietaryComponents: false

nexus_repos_r_proxy:
  - name: r-proxy-1
    proxy:
      remoteUrl: https://cloud.r-project.org
      contentMaxAge: 1440
      metadataMaxAge: 1440
    negativeCache:
      enabled: true
      timeToLive: 1440
    httpClient:
      blocked: false
      autoBlock: true
      connection:
        useTrustStore: true
  - name: r-proxy-2
    proxy:
      remoteUrl: https://cloud.r-project.org
      contentMaxAge: 1440
      metadataMaxAge: 1440
    routingRule: routing-rule-allow-all
  - name: r-proxy-3
    proxy:
      remoteUrl: https://cloud.r-project.org
      contentMaxAge: 1440
      metadataMaxAge: 1440
    negativeCache:
      enabled: true
      timeToLive: 1440

nexus_repos_r_group:
  - name: r-group
    online: true
    storage:
      blobStoreName: default
      strictContentTypeValidation: true
    group:
      memberNames:
        - r-proxy-1
        - r-proxy-2
        - r-proxy-3
        - r-hosted-1
  - name: r-group-reverse-group-order
    online: false
    storage:
      blobStoreName: default
      strictContentTypeValidation: false
    group:
      memberNames:
        - r-proxy-3
        - r-proxy-2
        - r-proxy-1
        - r-hosted-1

nexus_repos_helm_hosted:
  - name: helm-hosted-1
    online: true
    storage:
      blobStoreName: default
      strictContentTypeValidation: true
    cleanup:
      policyNames: []
    component:
      proprietaryComponents: true
  - name: helm-hosted-2
    online: true
    storage:
      blobStoreName: default
      strictContentTypeValidation: false
    cleanup:
      policyNames: []
    component:
      proprietaryComponents: false
  - name: helm-hosted-offline
    online: false
    storage:
      blobStoreName: default
      strictContentTypeValidation: false
    cleanup:
      policyNames:
        - helm_cleanup
    component:
      proprietaryComponents: false

nexus_repos_helm_proxy:
  - name: helm-proxy-1
    proxy:
      remoteUrl: https://kubernetes-charts.storage.googleapis.com
      contentMaxAge: 1440
      metadataMaxAge: 1440
    negativeCache:
      enabled: true
      timeToLive: 1440
    httpClient:
      blocked: false
      autoBlock: true
      connection:
        useTrustStore: true
  - name: helm-proxy-2
    proxy:
      remoteUrl: https://kubernetes-charts.storage.googleapis.com
      contentMaxAge: 1440
      metadataMaxAge: 1440
    routingRule: routing-rule-allow-all
  - name: helm-proxy-3
    proxy:
      remoteUrl: https://kubernetes-charts.storage.googleapis.com
      contentMaxAge: 1440
      metadataMaxAge: 1440
    negativeCache:
      enabled: true
      timeToLive: 1440

nexus_repos_conda_proxy:
  - name: conda-proxy-1
    proxy:
      remoteUrl: https://repo.anaconda.com/pkgs/main
      contentMaxAge: 1440
      metadataMaxAge: 1440
    negativeCache:
      enabled: true
      timeToLive: 1440
    httpClient:
      blocked: false
      autoBlock: true
      connection:
        useTrustStore: true
  - name: conda-proxy-2
    proxy:
      remoteUrl: https://repo.anaconda.com/pkgs/main
      contentMaxAge: 1440
      metadataMaxAge: 1440
    routingRule: routing-rule-allow-all
  - name: conda-proxy-3
    proxy:
      remoteUrl: https://repo.anaconda.com/pkgs/main
      contentMaxAge: 1440
      metadataMaxAge: 1440
    negativeCache:
      enabled: true
      timeToLive: 1440

nexus_repos_pypi_hosted:
  - name: pypi-hosted-1
    online: true
    storage:
      blobStoreName: default
      strictContentTypeValidation: true
    cleanup:
      policyNames:
        - python_cleanup
    component:
      proprietaryComponents: true
  - name: pypi-hosted-2
    online: true
    storage:
      blobStoreName: default
      strictContentTypeValidation: false
    cleanup:
      policyNames:
        - python_cleanup
    component:
      proprietaryComponents: false
  - name: pypi-hosted-offline
    online: false
    storage:
      blobStoreName: default
      strictContentTypeValidation: false
    cleanup:
      policyNames:
        - python_cleanup
    component:
      proprietaryComponents: false

nexus_repos_pypi_proxy:
  - name: pypi-proxy-1
    proxy:
      remoteUrl: https://pypi.org/simple
      contentMaxAge: 1440
      metadataMaxAge: 1440
    negativeCache:
      enabled: true
      timeToLive: 1440
    httpClient:
      blocked: false
      autoBlock: true
      connection:
        useTrustStore: true
  - name: pypi-proxy-2
    proxy:
      remoteUrl: https://pypi.org/simple
      contentMaxAge: 1440
      metadataMaxAge: 1440
    routingRule: routing-rule-allow-all
  - name: pypi-proxy-3
    proxy:
      remoteUrl: https://pypi.org/simple
      contentMaxAge: 1440
      metadataMaxAge: 1440
    negativeCache:
      enabled: true
      timeToLive: 1440
    pypi:
      removeQuarantined: false

nexus_repos_pypi_group:
  - name: pypi-group
    online: true
    storage:
      blobStoreName: default
      strictContentTypeValidation: true
    group:
      memberNames:
        - pypi-proxy-1
        - pypi-proxy-2
        - pypi-proxy-3
        - pypi-hosted-1
  - name: pypi-group-reverse-group-order
    online: false
    storage:
      blobStoreName: default
      strictContentTypeValidation: false
    group:
      memberNames:
        - pypi-proxy-3
        - pypi-proxy-2
        - pypi-proxy-1
        - pypi-hosted-1

nexus_repos_npm_hosted:
  - name: npm-hosted-1
    online: true
    storage:
      blobStoreName: default
      strictContentTypeValidation: true
  - name: npm-hosted-2
    online: true
    storage:
      blobStoreName: default
      strictContentTypeValidation: false
  - name: npm-hosted-offline
    online: false
    storage:
      blobStoreName: default
      strictContentTypeValidation: false

nexus_repos_npm_proxy:
  - name: npm-proxy-1
    proxy:
      remoteUrl: https://registry.npmjs.org/
      contentMaxAge: 1440
      metadataMaxAge: 1440
    negativeCache:
      enabled: true
      timeToLive: 1440
    httpClient:
      blocked: false
      autoBlock: true
      connection:
        useTrustStore: true
    npm:
      removeQuarantined: false
  - name: npm-proxy-2
    proxy:
      remoteUrl: https://registry.npmjs.org/
      contentMaxAge: 1440
      metadataMaxAge: 1440
    routingRule: routing-rule-allow-all
    npm:
      removeQuarantined: false
  - name: npm-proxy-3
    proxy:
      remoteUrl: https://registry.npmjs.org/
      contentMaxAge: 1440
      metadataMaxAge: 1440
    negativeCache:
      enabled: true
      timeToLive: 1440

nexus_repos_npm_group:
  - name: npm-group
    online: true
    storage:
      blobStoreName: default
      strictContentTypeValidation: true
    group:
      memberNames:
        - npm-proxy-1
        - npm-proxy-2
        - npm-proxy-3
        - npm-hosted-1
      writableMember: npm-hosted-1
  - name: npm-group-reverse-group-order
    online: false
    storage:
      blobStoreName: default
      strictContentTypeValidation: false
    group:
      memberNames:
        - npm-proxy-3
        - npm-proxy-2
        - npm-proxy-1
        - npm-hosted-1
      writableMember: npm-hosted-1

nexus_repos_gitlfs_hosted:
  - name: gitlfs-hosted-1
    online: true
    storage:
      blobStoreName: default
      strictContentTypeValidation: true
      writePolicy: allow_once
    cleanup:
      policyNames: []
    component:
      proprietaryComponents: true
  - name: gitlfs-hosted-offline-2
    online: false
    storage:
      blobStoreName: default
      strictContentTypeValidation: true
      writePolicy: allow_once
    cleanup:
      policyNames:
        - gitlfs_cleanup
    component:
      proprietaryComponents: false

nexus_repos_docker_hosted:
  - name: docker-hosted-1
    online: true
    storage:
      blobStoreName: default
      strictContentTypeValidation: true
      writePolicy: allow_once
      latestPolicy: true
    cleanup:
      policyNames: []
    docker:
      v1Enabled: false
      forceBasicAuth: false
      httpPort: 10000
      httpsPort: 10001

  - name: docker-hosted-offline
    online: false
    storage:
      blobStoreName: default
      strictContentTypeValidation: true
      writePolicy: allow_once
      latestPolicy: true
    cleanup:
      policyNames:
        - docker_cleanup
    component:
      proprietaryComponents: true
    docker:
      v1Enabled: true
      forceBasicAuth: true
      httpPort: 10002
      httpsPort: 10003
      subdomain: docker-hosted-offline

nexus_repos_docker_proxy:
  - name: docker-proxy-1
    proxy:
      remoteUrl: https://remote.repository.com
      contentMaxAge: 1440
      metadataMaxAge: 1440
    negativeCache:
      enabled: true
      timeToLive: 1440
    httpClient:
      blocked: false
      autoBlock: true
      connection:
        useTrustStore: true
  - name: docker-proxy-2
    proxy:
      remoteUrl: https://remote.repository.com
      contentMaxAge: 1440
      metadataMaxAge: 1440
    routingRule: routing-rule-allow-all
  - name: docker-proxy-3
    proxy:
      remoteUrl: https://remote.repository.com
      contentMaxAge: 1440
      metadataMaxAge: 1440
    negativeCache:
      enabled: true
      timeToLive: 1440

nexus_repos_docker_group:
  - name: docker-group
    online: true
    storage:
      blobStoreName: default
      strictContentTypeValidation: true
    group:
      memberNames:
        - docker-hosted-1
        - docker-proxy-1
        - docker-proxy-2
        - docker-proxy-3
      writableMember: docker-hosted-1
    docker:
      v1Enabled: false
      forceBasicAuth: false
      httpPort: 10300
      httpsPort: 10301
  - name: docker-group-reverse-group-order
    online: false
    storage:
      blobStoreName: default
      strictContentTypeValidation: false
    group:
      memberNames:
        - docker-proxy-3
        - docker-proxy-2
        - docker-proxy-1
        - docker-hosted-1
      writableMember: docker-hosted-1
    docker:
      v1Enabled: false
      forceBasicAuth: false
      httpPort: 10400
      httpsPort: 10401

nexus_repos_maven_hosted:
  - name: repo-1
    online: true
    storage:
      strictContentTypeValidation: true
      writePolicy: ALLOW_ONCE # Disable redeploy
    cleanup:
      policyNames:
        - maven_cleanup
    component:
      proprietaryComponents: true
    maven:
      versionPolicy: RELEASE
      layoutPolicy: STRICT
      contentDisposition: INLINE
  - name: repo-2
    online: true
    storage:
      strictContentTypeValidation: false
      writePolicy: ALLOW # Allow redeploy
    cleanup:
      policyNames: []
    component:
      proprietaryComponents: false
    maven:
      versionPolicy: SNAPSHOT
      layoutPolicy: PERMISSIVE
      contentDisposition: ATTACHMENT
  - name: repo-3-offline
    online: false
    storage:
      strictContentTypeValidation: false
      writePolicy: DENY # Read only
    cleanup:
      policyNames: []
    component:
      proprietaryComponents: false
    maven:
      versionPolicy:
      layoutPolicy: PERMISSIVE
      contentDisposition: ATTACHMENT
  - name: maven-snapshots
    online: true
    storage:
      strictContentTypeValidation: true
      writePolicy: ALLOW_ONCE
    cleanup:
      policyNames:
        - maven_cleanup
    component:
      proprietaryComponents: true
    maven:
      contentDisposition: INLINE
      layoutPolicy: STRICT
      versionPolicy: SNAPSHOT
  - name: maven-releases
    online: true
    storage:
      strictContentTypeValidation: true
    cleanup:
      policyNames:
        - maven_cleanup
    component:
      proprietaryComponents: true
    maven:
      contentDisposition: INLINE
      layoutPolicy: STRICT
      versionPolicy: RELEASE
  - name: repo-cleanup-order-1
    cleanup:
      policyNames:
        - maven_cleanup
        - maven_releases_cleanup
        - maven_prereleases_cleanup
  - name: repo-cleanup-order-2
    cleanup:
      policyNames:
        - maven_releases_cleanup
        - maven_cleanup
        - maven_prereleases_cleanup
  - name: repo-cleanup-order-3
    cleanup:
      policyNames:
        - maven_prereleases_cleanup
        - maven_releases_cleanup
        - maven_cleanup

nexus_repos_maven_proxy:
  - name: maven-central
    proxy:
      remoteUrl: https://repo1.maven.org/maven2/
      contentMaxAge: -1
      metadataMaxAge: 1440
    negativeCache:
      enabled: true
      timeToLive: 1440
    httpClient:
      blocked: false
      autoBlock: true
      connection:
        useTrustStore: true
  - name: maven-proxy-2
    proxy:
      remoteUrl: https://repo1.maven.org/maven2/
      contentMaxAge: -1
      metadataMaxAge: 1440
    routingRule: routing-rule-allow-all
  - name: maven-proxy-3
    proxy:
      remoteUrl: https://repo1.maven.org/maven2/
      contentMaxAge: -1
      metadataMaxAge: 1440
    negativeCache:
      enabled: true
      timeToLive: 1440
    httpClient:
      blocked: false
      autoBlock: true

nexus_repos_maven_group:
  - name: maven-group
    online: true
    storage:
      blobStoreName: default
      strictContentTypeValidation: true
    group:
      memberNames:
        - maven-central
        - maven-proxy-2
        - maven-proxy-3
  - name: maven-group-reverse-group-order
    online: false
    storage:
      blobStoreName: default
      strictContentTypeValidation: false
    group:
      memberNames:
        - maven-proxy-3
        - maven-proxy-2
        - maven-central

nexus_routing_rules:
  - name: routing-rule-block-nmap
    description: routing-rule-1
    mode: BLOCK
    matchers:
      - ".*nmap"
  - name: routing-rule-allow-patch-update
    description: rrouting-rule-2
    mode: ALLOW
    matchers:
      - ".*patch"
      - ".*update"
  - name: routing-rule-allow-all
    description: routing-rule-3
    mode: ALLOW
    matchers:
      - ".*"
  - name: routing-rule-block-all
    description: routing-rule-4
    mode: BLOCK
    matchers:
      - ".*"
